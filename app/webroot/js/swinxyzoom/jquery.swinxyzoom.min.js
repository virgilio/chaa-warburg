(function(f,q){function c(c,a){this.e=c.get(0);this.j=c.first();a!=q&&f.extend(this,a)}function e(c,a){var b=this;b.element=f(c);b.options=f.extend({},r,a);b.driver=new f.fn.swinxyzoom.modes[b.options.mode](this);b.initialised=!1;b.enabled=!1;b.waiting=null;b.element.css({cursor:"default"});b.dmp={cX:0,tX:0,cY:0,tY:0,timer:!1};b.last=!1;b.hasFocus=!1;b._animate=function(){var a=b.dmp,d=b.si.e.style,c=b.options.damping,g=a.tX-a.cX,e=a.tY-a.cY;d.left=(a.cX+=g/c)+"px";d.top=(a.cY+=e/c)+"px";0==~~g&&
0==~~e&&(clearTimeout(a.timer),a.timer=!1)};b._moveSlider=function(a){a=a.pointers[0].y;var d=b.ct.sl.j.offset(),c=b.maxZoom/b.ct.sl.j.height();a=b.ct.sl.j.height()-(a-d.top);b.zoom(a*c,b.cursor.lastX,b.cursor.lastY)};b._focus=function(){var a=b.dp.j.offset();b.dp.ol=a.left;b.dp.ot=a.top;b.hasFocus=!0;b.options.controls&&(b.ct.j.show(),b.ct.ol.j.stop().animate({opacity:0.5},{queue:!1}),b.ct.j.show());!1!==b.last&&(b.last.w!=b.rt.j.width()||b.last.h!=b.rt.j.height())&&b.rebuild(function(){b.zoom(b.maxZoom,
b.cursor.lastX,b.cursor.lastY);b.driver.load&&b.driver.load(b.cursor.lastX,b.cursor.lastY);b.zoom(b.maxZoom,b.cursor.lastX,b.cursor.lastY)});b.last={w:b.rt.j.width(),h:b.rt.j.height()}};b._blur=function(a){b.hasFocus=!1;b.options.controls&&(b.ct.j.hide(),b.ct.ol.j.stop().animate({opacity:0},{queue:!1,complete:function(){}}))};b._mousewheel=function(a,d,c,g){a.preventDefault();b.zoom(b.level+Math.round(g*(b.maxZoom/b.options.steps)),a.pageX,a.pageY)};b._stepIn=function(a){a.preventDefault();b.zoom(b.level+
Math.round(1*(b.maxZoom/b.options.steps)),b.cursor.lastX,b.cursor.lastY)};b._stepOut=function(a){a.preventDefault();b.zoom(b.level+Math.round(-1*(b.maxZoom/b.options.steps)),b.cursor.lastX,b.cursor.lastY)};var d;b._scale=[];b._scale[1]=function(a){d=b.level;f("#info").append("start["+d+"] ")};b._scale[2]=function(a){f("#info").append("s ");f("#info").append("s["+Math.abs(d*a.scale)+","+a.position.x+"] ");b.zoom(d*a.scale,a.position.x,a.position.y)};b._scale[3]=function(a){};var e=b.element.children().first().attr("src"),
k=b.element.attr("href"),g=new Image;g.onload=function(){b.load(e,k)};g.src=e}var r={damping:8,steps:15,mode:"dock",zoom:15,controls:!0,size:"actual"};e.prototype.load=function(c,a,b){var d=this;c||(c=d.dp.tn.src);a||(a=d.si.src);var e=function(){b&&d._focus();d.dp.tn.src=c;d.si.src=a;d.dp.tn.j.attr("src")!=d.dp.tn.src&&(d.dp.tn.j.one("load",function(){"actual"==d.options.size&&d.rt.j.css({width:d.dp.tn.j.width(),height:d.dp.tn.j.height()});d.dp.tn.j.stop().animate({opacity:1},{queue:!1,complete:function(){d.rt.bg.j.attr("src",
d.dp.tn.src);d.dp.tn.j.css({opacity:0})}})}),d.dp.tn.j.attr("src",d.dp.tn.src));var e=function(a,b){var c;d.si.j.one("load",function(){d.dp.j.off("sxy-move sxy-hover",c);d.waiting=null;d.rebuild(function(){d.zoom(d.maxZoom/d.options.steps*d.options.zoom,d.cursor.lastX,d.cursor.lastY);d.driver.load&&d.driver.load(d.cursor.lastX,d.cursor.lastY);d.zoom(d.maxZoom/d.options.steps*d.options.zoom,d.cursor.lastX,d.cursor.lastY);d.rt.j.toggleClass("sxy-zoom-loading")})});d.cursor={lastX:a,lastY:b};d.dp.j.on("sxy-move sxy-hover",
c=function(a){a=a.pointers[0];d.cursor={lastX:a.x,lastY:a.y}});d.si.j.attr("src",d.si.src)};if(b)d.waiting=null,d.rt.j.toggleClass("sxy-zoom-loading"),e(0,0);else if(!d.waiting)d.rt.j.one("sxy-focus",d.waiting=function(a){d.rt.j.toggleClass("sxy-zoom-loading");e(a.pointers[0].x,a.pointers[0].y)})};!1==d.initialised?d.tearUp(e):e()};e.prototype.getNaturalSize=function(c,a){var b=new Image;b.onload=function(){a({w:b.width,h:b.height})};b.src=c};e.prototype.rebuild=function(c){var a=this,b=a.dp,d=a.vp,
e=a.si,k=a.vf;f.extend(b,{w:"actual"==a.options.size?b.tn.j.width():a.rt.j.width(),h:"actual"==a.options.size?b.tn.j.height():a.rt.j.height(),ol:b.j.offset().left,ot:b.j.offset().top,hyp:Math.round(Math.sqrt(Math.pow(b.tn.j.width(),2)+Math.pow(b.tn.j.height(),2)))});switch(a.options.size){case "actual":a.rt.j.css({width:b.w,height:b.h});break;case "src":a.rt.j.css({width:b.w,height:b.h})}f.extend(d,{w:b.w,h:b.h});a.vp.j.css({width:b.w,height:b.h});a.getNaturalSize(a.si.src,function(d){f.extend(e,
{w:0,h:0,l:0,t:0,mL:0,mT:0,oHyp:Math.round(Math.sqrt(Math.pow(d.w,2)+Math.pow(d.h,2))),oH:d.h,oW:d.w});f.extend(k,{w:0,h:0,l:0,t:0});a.ct.sl.j.css({height:a.ct.sl.h=a.ct.j.height()-(a.ct.zin.j.outerHeight()+a.ct.zout.j.outerHeight())});a.ct.sl.h-=16;clearTimeout(a.dmp.timer);a.dmp={cX:0,tX:0,cY:0,tY:0,timer:!1};a.scale=Math.atan(a.si.oH/a.si.oW);a.angle=0;a.maxZoom=e.oHyp-b.hyp;a.level=0;c()})};e.prototype.tearUp=function(e){var a=this;a.initialised=!0;a.el=new c(a.element);a.el.tn=new c(a.element.children());
a.getNaturalSize(a.el.tn.j.attr("src"),function(b){console.log("tear-up "+a.options.mode);var d,h;switch(a.options.size){case "actual":d=b.w+"px";h=b.h+"px";break;case "src":d=a.el.tn.j.attr("width")+"px";h="auto";break;default:d=a.options.size,h="auto"}var k={w:d,h:h,srcthumb:a.el.tn.j.attr("src"),mode:a.options.mode,auto:"auto"==h?'<div style="padding-top: '+100/b.w*b.h+'%;" />':""};a.el.j.wrap('<div class="sxy-zoom-container sxy-zoom-mode-{mode}" style="width: {w}; height: {h}; position: relative;" ></div>'.replace(/\{(\w+)\}/g,
function(a,b){return k[b]||a}));a.element.hide();a.rt=new c(a.el.j.parent());a.rt.j.append('<img class="sxy-zoom-bg" src="{srcthumb}" />{auto}<div class="sxy-controls"><div class="overlay"></div><a class="in" href="#"></a><div class="sxy-slider"><div class="sxy-handle" style="top: 0px;"></div></div><a class="out" href="#"></a></div><div class="sxy-zoom-dragpad"><div class="sxy-overlay"></div><div class="sxy-zoom-viewport"><img galleryimg="no" /></div><img class="inner-thumb" src="{srcthumb}" /><div class="sxy-zoom-viewfinder"></div></div><div class="sxy-loading"><span></span></div>'.replace(/\{(\w+)\}/g,
function(a,b){return k[b]||a}));a.rt.bg=new c(a.rt.j.find(".sxy-zoom-bg"));a.rt.j.on("dragstart",function(a){return!1});a.ct=new c(a.rt.j.find(".sxy-controls").hide());a.ct.ol=new c(a.ct.j.find(".overlay"));a.ct.zin=new c(a.ct.j.find(".in"));a.ct.zout=new c(a.ct.j.find(".out"));a.ct.sl=new c(a.ct.j.find(".sxy-slider").first(),{h:0});a.ct.hnd=new c(a.ct.j.find(".sxy-handle"));a.dp=new c(a.rt.j.find(".sxy-zoom-dragpad").first(),{w:0,h:0,ol:0,ot:0,hyp:0});a.dp.ovl=new c(a.dp.j.find(".sxy-overlay"));
a.dp.tn=new c(a.dp.j.find(".inner-thumb").css({opacity:0}),{src:""});a.vp=new c(a.dp.j.find(".sxy-zoom-viewport").css({opacity:0}),{w:0,h:0});a.si=new c(a.vp.j.find("img"),{w:0,h:0,l:0,t:0,mL:0,mT:0,oHyp:0,oH:0,oW:0,src:""});a.vf=new c(a.dp.j.find(".sxy-zoom-viewfinder").css({display:"none"}),{w:0,h:0,l:0,t:0,osl:0,ost:0});a.rt.j.on("sxy-focus",a._focus);a.rt.j.on("sxy-blur",a._blur);if(f.event.special.mousewheel)a.rt.j.on("mousewheel",a._mousewheel);a.dp.j.on("sxy-scale",function(b){a._scale[b.state](b)});
a.ct.zin.j.on("click",a._stepIn);a.ct.zout.j.on("click",a._stepOut);a.ct.sl.j.on("sxy-down sxy-move",a._moveSlider);e()})};e.prototype.move=function(c,a,b){var d=-1*(c/this.scale),e=-1*(a/this.scale);this.cursor.lastX=d+this.vf.w/2+this.dp.ol;this.cursor.lastY=e+this.vf.h/2+this.dp.ot;0>d&&(d=c=0);0>e&&(e=a=0);d+this.vf.w>this.dp.w&&(d=this.dp.w-this.vf.w,c=this.si.mL);e+this.vf.h>this.dp.h&&(e=this.dp.h-this.vf.h,a=this.si.mT);this.vf.l=~~d;this.vf.t=~~e;this.dmp.tX=c;this.dmp.tY=a;b&&!1!=this.options.damping?
this.dmp.timer||(this.dmp.timer=setInterval(this._animate,16)):(clearTimeout(this.dmp.timer),this.dmp.timer=!1,b=this.si.e.style,b.left=(this.dmp.tX=this.dmp.cX=c)+"px",b.top=(this.dmp.tY=this.dmp.cY=a)+"px")};e.prototype.center=function(c,a,b){this.move(-1*(c-this.vf.w/2)*this.scale,-1*(a-this.vf.h/2)*this.scale,b)};e.prototype.zoom=function(c,a,b){this.level=c;0>this.level&&(this.level=0);this.level>this.maxZoom&&(this.level=this.maxZoom);c=100*((this.si.oHyp-this.level)/this.si.oHyp);this.ct.hnd.j.css({top:this.ct.sl.h-
this.ct.sl.h/100*100*(this.level/this.maxZoom)});this.vf.w=this.vp.w/100*c;this.vf.h=this.vp.h/100*c;this.vf.osl=parseInt(this.vf.j.css("border-left-width"),10);this.vf.ost=parseInt(this.vf.j.css("border-top-width"),10);this.scale=this.si.oW/this.vp.w/(this.si.oW/100*c/this.vp.w);this.si.w=this.si.oW/(this.si.oW/100*c/this.dp.w);this.si.h=this.si.oH/(this.si.oH/100*c/this.dp.h);this.vf.j.css({width:this.vf.w,height:this.vf.h});this.si.j.css({width:this.si.w,height:this.si.h});this.si.mL=0-(this.si.w-
this.vp.w);this.si.mT=0-(this.si.h-this.vp.h);this.driver.zoom&&this.driver.zoom(a,b)};f.fn.swinxyzoom=function(c){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){var b;if(b=f.data(this,"swinxyzoom")){if(b[c])return b[c].apply(b,a);f.error("Method "+c+" does not exist on jQuery.swinxyzoom")}else f.data(this,"swinxyzoom",new e(this,c))})};f.fn.swinxyzoom.modes={}})(jQuery);(function(f,q){function c(a){var b=0,c=0,e;for(e in a){++b;for(var f=a[e],g=f.variations,m=0,l=g.length;m<l;++m)if(document.createElement("div").style[g[m]]!==q){++c;f.supported=g[m];break}}return b==c}var e={position:"right"},r=!1,n={backgroundSize:{supported:!1,variations:["backgroundSize","WebkitBackgroundSize","MozBackgroundSize","OBackgroundSize","msBackgroundSize"]}};f.fn.swinxyzoom.modes.dock=function(a){function b(){m&&(m=!1,a.vf.j.hide(),a.dp.ovl.j.stop().animate({opacity:0},{queue:!1}),
a.vp.j.stop().animate({opacity:0,left:a.dp.w/2,top:a.dp.h/2,width:0,height:0},{queue:!1}))}function d(b,c){a.waiting||(m=!0,a.si.j.show(),a.vp.j.show(),a.vf.j.show(),a.dp.ovl.j.stop().animate({opacity:0.5},{queue:!1}),a.vp.j.stop().animate({opacity:1,left:p,top:s,width:a.vp.w,height:a.vp.h},{queue:!1}),l.move(b,c,!0))}function h(){a.rt.j.on("sxy-focus",function(a){a=a.pointers[0];d(a.x,a.y)});a.rt.j.on("sxy-blur",function(a){b()});a.dp.j.on("sxy-hover sxy-move sxy-down",x);if(!1==t){var c=f('<img src="" style="display: block; position: absolute;" />');
a.vf.j.append(c);a.vf.img={j:c,e:c.get(0)}}l.initialised=!0}function k(){if(l.initialised){var b=a.vf,c=a.vf.e.style;b.l!=u||b.t!=v?(c.left=(u=b.l)+"px",c.top=(v=b.t)+"px",!1==t?(c=a.vf.img.e.style,c.left="-"+(b.l+b.osl)+"px",c.top="-"+(b.t+b.ost)+"px"):c.backgroundPosition="-"+(b.l+b.osl)+"px -"+(b.t+b.ost)+"px",w=setTimeout(k,8)):w=!1}}function g(c,e,s){var g=a.dp.j.offset(),f=g.left,g=g.top,l=f+a.dp.j.width(),t=g+a.dp.j.height();e<g||c>l||e>t||c<f?b():(m||d(c,e),a.center(c-a.dp.ol,e-a.dp.ot,s),
w||k())}this.initialised=!1;r||(r=!0,n._all=c(n));var m=!1,l=this,p=0,s=0,t=n.backgroundSize.supported,x=function(a){1==a.pointers.length&&(a=a.pointers[0],g(a.x,a.y,!0))},y=f.extend({},e,a.options.dock!=q?a.options.dock:{}),w=!1,u,v;l.tearUp=h;l.load=function(b,c){switch(y.position){case "top":p=0;s=-1*(a.dp.h+10);break;case "right":p=a.dp.w+10;s=0;break;case "bottom":p=0;s=a.dp.h+10;break;case "left":p=-1*(a.dp.w+10),s=0}a.vp.j.css({width:0,height:0,left:a.dp.w/2,top:a.dp.h/2});a.dp.ovl.j.css({opacity:0});
a.vf.j.css({position:"relative",overflow:"hidden"});u=v=0;l.initialised||h();!1==t?(a.vf.img.j.attr("src",a.dp.tn.src),a.vf.img.j.css({width:a.dp.w,height:a.dp.h})):(a.vf.j.css("background-image","url("+a.dp.tn.src+")"),a.vf.j.css(t,a.dp.w+"px "+a.dp.h+"px"));a.hasFocus&&d(b,c)};l.focus=d;l.blur=b;l.move=g;l.zoom=function(a,b){g(a,b,!1)}}})(jQuery);(function(f,q){f.fn.swinxyzoom.modes.window=function(c){function e(b,d){c.waiting||(c.si.j.show(),c.vp.j.show(),c.vf.j.show(),c.vp.j.stop().animate({opacity:1},{queue:!1}),a(b,d,!0))}function f(){c.vf.j.hide();c.vp.j.stop().animate({opacity:0},{queue:!1})}function n(){var a=c.vf,b=c.vf.e.style;a.l!=h||a.t!=k?(b.left=(h=a.l)+"px",b.top=(k=a.t)+"px",d=setTimeout(n,8)):d=!1}function a(a,b,e){c.center(a-c.dp.ol,b-c.dp.ot,e);d||n()}var b=this,d=this.initialised=!1,h,k;b.tearUp=function(b,d){c.rt.j.on("sxy-focus",
function(a){e(a.pointers[0].x,a.pointers[0].y)});c.rt.j.on("sxy-blur",function(){f()});c.dp.j.on("sxy-hover sxy-move sxy-down",function(b){1==b.pointers.length&&(b=b.pointers[0],a(b.x,b.y,!0))})};b.load=function(a,d){c.vp.j.css({opacity:0,width:c.dp.w,height:c.dp.h,left:0,top:0});h=k=0;b.initialised||b.tearUp();c.hasFocus&&b.focus(a,d)};b.focus=e;b.blur=f;b.move=a;b.zoom=function(b,c){a(b,c,!1)}}})(jQuery);(function(f,q){var c={width:200,height:200};f.fn.swinxyzoom.modes.lens=function(e){function r(a,b){e.waiting||(h=!0,e.dp.j.on("sxy-hover sxy-move sxy-down",k),e.vp.j.show(),e.vp.j.stop().animate({opacity:1,width:e.vp.w,height:e.vp.h},{queue:!1}),d.move(a,b,!0))}function n(){h&&(h=!1,e.dp.j.off("sxy-hover sxy-move sxy-down",k),e.vp.j.stop().animate({opacity:0},{queue:!1,complete:function(){e.vp.j.hide()}}))}function a(){var b=e.vf,c=e.vp,d=e.vp.e.style;b.l!=l||b.t!=p?(d.left=e.cursor.lastX-e.dp.ol-
c.w/2+"px",d.top=e.cursor.lastY-e.dp.ot-c.h/2+"px",m=setTimeout(a,8)):m=!1}function b(b,c,d){e.center(b-e.dp.ol,c-e.dp.ot,d);m||a()}this.initialised=!1;var d=this,h=!0,k=function(a){1==a.pointers.length&&(a=a.pointers[0],b(a.x,a.y,!0))},g=f.extend({},c,e.options.lens!=q?e.options.lens:{}),m=!1,l,p;d.tearUp=function(a,b){e.dp.j.swinxytouch("bound");e.dp.j.on("sxy-focus",function(a){r(a.pointers[0].x,a.pointers[0].y)});e.dp.j.on("sxy-blur",function(){n()})};d.load=function(a,b){e.vp.j.css({opacity:0,
width:g.width,height:g.height,left:0,top:0});e.vp.w=g.width;e.vp.h=g.height;e.vp.j.show();e.si.j.show();e.vf.j.hide();l=p=0;d.initialised||d.tearUp();e.hasFocus&&r(a,b)};d.focus=r;d.blur=n;d.move=b;d.zoom=function(a,c){b(a,c,!1)}}})(jQuery);(function(f,q){f.fn.swinxyzoom.modes.slippy=function(c){var e,f,n,a;function b(){c.dp.j.on("sxy-focus",function(a){d(a.pointers[0].x,a.pointers[0].y)});c.dp.j.on("sxy-blur",function(a){h()});c.dp.j.on("sxy-down",function(b){c.dp.j.toggleClass("down");b=b.pointers[0];e=c.dmp.tX;f=c.dmp.tY;n=b.x-c.dp.ol;a=b.y-c.dp.ot});c.dp.j.on("sxy-up",function(a){c.dp.j.toggleClass("down")});c.dp.j.on("sxy-move",function(b){b=b.pointers[0];c.move(e+(b.x-c.dp.ol-n),f+(b.y-c.dp.ot-a),!0);m||k()})}function d(a,b){c.waiting||
(c.si.j.show(),c.vp.j.show(),c.vf.j.show(),c.vp.j.stop().animate({opacity:1},{queue:!1}))}function h(a,b){c.vf.j.hide();c.vp.j.animate({opacity:0},{queue:!1})}function k(){var a=c.vf,b=c.vf.e.style;a.l!=l||a.t!=p?(b.left=(l=a.l)+"px",b.top=(p=a.t)+"px",m=setTimeout(k,8)):m=!1}this.initialised=!1;var g=this;a=n=f=e=void 0;var m=!1,l,p;g.tearUp=b;g.load=function(h,k){c.vp.j.css({opacity:0,width:c.dp.w,height:c.dp.h,left:0,top:0});f=e=0;n=h;a=k;c.center(c.dp.w/2,c.dp.h/2,!1);l=p=0;g.initialised||b();
c.hasFocus&&d(h,k)};g.focus=d;g.blur=h;g.zoom=function(a,b){c.center(c.cursor.lastX-c.dp.ol,c.cursor.lastY-c.dp.ot,!1);c.vf.j.css({left:c.vf.l,top:c.vf.t})}}})(jQuery);
